(function(){function _generalInitHtml(data,context){var firstSelector=context.options.firstSelector,secSelector=context.options.secSelector;var firstStr='';firstStr+=`<option value="">请选择公司</option>`;data.forEach(function(item,index){firstStr+=`<option value="${item.value}">${item.name}</option>`});$(firstSelector).html(firstStr);$(firstSelector).on('change',function(){var firstVal=$(this).val();var currentFirst=data.filter(function(item){return firstVal===item.value});if(currentFirst.length>0){var currentDps=currentFirst[0].children;var secStr='';secStr+=`<option value="">请选择部门</option>`;currentDps.forEach(function(dataItem){secStr+=`<option value="${dataItem.value}">${dataItem.name}</option>`});$(secSelector).html(secStr)}else{var secStr=`<option value="">请选择部门</option>`;$(secSelector).html(secStr)}})}function _generalHtmlAndSetValue(context,value){var firstSelector=context.options.firstSelector,secSelector=context.options.secSelector,firstVal=value.firstVal,secVal=value.secVal,_this=this;var firstStr='';firstStr+=`<option value="">请选择公司</option>`;context.data.forEach(function(item,index){firstStr+=`<option value="${item.value}">${item.name}</option>`});$(firstSelector).html(firstStr);$(firstSelector).val(firstVal);var currentFirst=context.data.filter(function(item){return firstVal==item.value});if(currentFirst.length>0){var currentDps=currentFirst[0].children;var secStr='';secStr+=`<option value="">请选择部门</option>`;currentDps.forEach(function(dataItem){secStr+=`<option value="${dataItem.value}">${dataItem.name}</option>`});$(secSelector).html(secStr)}else{var secStr=`<option value="">请选择部门</option>`;$(secSelector).html(secStr)};$(secSelector).val(secVal)}function SecReactSelector(options){if(!options)return;this.options=options;this.url=options.url?options.url:null;this.data=[];this.fakeData=[];var _this=this;if(this.url){$.ajax({url:options.url,cache:false,async:true,type:options.method?options.method:"GET",data:options.ajaxParam?options.ajaxParam:{},beforeSend:function(){},success:function(res){_this.data=res;_generalInitHtml(_this.data,_this);_this.fakeData=res},complete:function(){}})}else{this.data=options.data;_generalInitHtml(options.data,this)}}SecReactSelector.prototype.setValue=function(value){var _this=this;if(this.data.length>0){_generalHtmlAndSetValue(this,value)}else{Object.defineProperty(_this,'fakeData',{set:function(val){_generalHtmlAndSetValue(_this,value)}})}};window.SecReactSelector=SecReactSelector})();